{% extends 'layout.html' %}

{% set title = 'Forums' %}
{% block body %}
		<div class="row-fluid">
			<div class="span4 offset2">
				<h2>Forums</h2>
			</div>
			<div class="span2 offset3">
				<a class="btn btn-large" href="{{ url_for('forum.createTopic') }}">Create Topic</a>
			</div>
		</div>
		<div class="row-fluid">
			<div class="span10 offset1">
				<table class="table table-striped table-hover">
					<thead>
						<tr>
							<th width="70%">Topic Title</th>
							<th width="15%">Author</th>
							<th width="15%">Last Post</th>
						</tr>
					</thead>
					<tbody>
			{% for topic in topics %}
						<tr class='{{ loop.cycle('odd', 'even') }}'>
							<td>
								<a href="{{ url_for('forum.topic', topicid = topic.id) }}">
									{{ topic.title }}
								</a>
								<span class="btn-group pull-right">
									{% for tag in topic.tags|sort %}
										<a class="btn btn-mini" href="{{ url_for('forum.index', tag = tag) }}">{{ tag }}</a>
									{% endfor %}
								</span>
							</td>
							<td>
								<a href="{{ url_for('user.profile', userid = topic.author.id) }}">
									{{ topic.author.role }}
									{{ topic.author.firstname|title }}
									{{ topic.author.lastname|title }}
								</a>
							</td>
							<td>{{ topic.lastTime|timesince }}</td>
						</tr>
			{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
		<div class="row-fluid">
			<div class="span12">
				{% from 'function/functions.html' import paginator %}
				{{ paginator('forum.index', page, pages, tag = pagetag) }}
			</div>
		</div>
{% endblock %}